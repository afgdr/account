<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Auth ‚Üí –¶–µ–ª–µ–≤–æ–π —Å–∞–π—Ç ‚Üí –ü–∞—Ä–æ–ª—å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .google-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            color: #757575;
            border: 2px solid #ddd;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
            width: 100%;
        }

        .google-btn:hover {
            background: #f8f9fa;
            border-color: #4285f4;
            box-shadow: 0 2px 8px rgba(66, 133, 244, 0.2);
        }

        .google-btn img {
            width: 20px;
            height: 20px;
            margin-right: 12px;
        }

        .status {
            margin: 15px 0;
            padding: 12px;
            border-radius: 6px;
            display: none;
            font-weight: 500;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .loading {
            display: none;
            color: #667eea;
            margin: 10px 0;
        }

        .redirect-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
            text-align: left;
        }

        .redirect-info h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .countdown {
            font-size: 18px;
            font-weight: bold;
            color: #4285f4;
            margin: 10px 0;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            position: relative;
        }

        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            z-index: 2;
        }

        .step.active {
            background: #4285f4;
            color: white;
        }

        .step.completed {
            background: #28a745;
            color: white;
        }

        .step-line {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            height: 2px;
            background: #e9ecef;
            z-index: 1;
        }

        .step-line.active {
            background: #4285f4;
        }

        .user-badge {
            display: inline-flex;
            align-items: center;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 10px 0;
        }

        .user-badge img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h1>
        <p class="subtitle">–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Google –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è</p>

        <div class="step-indicator">
            <div class="step active" id="step1">1</div>
            <div class="step" id="step2">2</div>
            <div class="step" id="step3">3</div>
            <div class="step-line" id="stepLine"></div>
        </div>

        <div id="status" class="status"></div>
        <div id="loading" class="loading">‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞...</div>

        <div id="loginSection">
            <button id="googleLogin" class="google-btn">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTcuNiA5LjJsLS4xLTEuOEg5djMuNGg0LjhDMTMuNiAxMiAxMyAxMyAxMiAxMy42djIuMmgzYTguOCA4LjggMCAwIDAgMi42LTYuNnoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik05IDE4YzIuNCAwIDQuNS0uOCA2LTIuMmwtMy0yLjJhNS40IDUuNCAwIDAgMS04LTIuOUgxVjEzYTkgOSAwIDAgMCA4IDV6IiBmaWxsPSIjMzRBODUzIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNNCAxMC43YTUuNCA1LjQgMCAwIDEgMC0zLjRWNUgxYTkgOSAwIDAgMCAwIDhsMy0yLjN6IiBmaWxsPSIjRkJCQzA1IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNOSAzLjZjMS4zIDAgMi41LjQgMy40IDEuM0wxNSAyLjNBOSA5IDAgMCAwIDEgNWwzIDIuNGE1LjQgNS40IDAgMCAxIDUtMy43eiIgZmlsbD0iI0VBNDMzNSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTAgMGgxOHYxOEgweiIvPjwvZz48L3N2Zz4=" alt="Google">
                –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
            </button>
        </div>

        <div id="successSection" style="display: none;">
            <div class="user-badge">
                <img id="successAvatar" src="" alt="–ê–≤–∞—Ç–∞—Ä">
                <span id="successName"></span>
            </div>
            <div class="countdown" id="countdown">5</div>
            <p>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —Å–∞–π—Ç...</p>
            
            <div class="redirect-info">
                <h3>üìã –ú–∞—Ä—à—Ä—É—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</h3>
                <p>1. <strong>–¶–µ–ª–µ–≤–æ–π —Å–∞–π—Ç</strong> (5 —Å–µ–∫—É–Ω–¥)</p>
                <p>2. <strong>–°–∞–π—Ç —Å –ø–∞—Ä–æ–ª–µ–º</strong> (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)</p>
            </div>
        </div>
    </div>

    <script>
        // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
        const GOOGLE_CLIENT_ID = '421466180389-vlbok5rmkea0s22evhj2cig4qcie0a01.apps.googleusercontent.com';
        
        // –¶–µ–ª–µ–≤—ã–µ —Å–∞–π—Ç—ã –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
        const TARGET_SITES = {
            primary: 'https://delta-exploits.pages.dev', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ü–µ–ª–µ–≤–æ–π —Å–∞–π—Ç
            password: 'https://www.youtube.com/watch?v=JZdspKOT1W8' // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç —Å –ø–∞—Ä–æ–ª–µ–º
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const loginSection = document.getElementById('loginSection');
        const successSection = document.getElementById('successSection');
        const status = document.getElementById('status');
        const loading = document.getElementById('loading');
        const countdown = document.getElementById('countdown');
        const successAvatar = document.getElementById('successAvatar');
        const successName = document.getElementById('successName');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã —à–∞–≥–æ–≤
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const stepLine = document.getElementById('stepLine');

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —à–∞–≥–æ–≤
        function updateSteps(currentStep) {
            const steps = [step1, step2, step3];
            
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });

            if (currentStep > 1) {
                stepLine.classList.add('active');
            } else {
                stepLine.classList.remove('active');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(message, type) {
            status.textContent = message;
            status.className = 'status ' + type;
            status.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        function setLoading(show) {
            loading.style.display = show ? 'block' : 'none';
        }

        // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google
        document.getElementById('googleLogin').addEventListener('click', function() {
            const authUrl = new URL('https://accounts.google.com/o/oauth2/v2/auth');
            authUrl.searchParams.set('client_id', GOOGLE_CLIENT_ID);
            authUrl.searchParams.set('redirect_uri', window.location.href);
            authUrl.searchParams.set('response_type', 'token');
            authUrl.searchParams.set('scope', 'https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email');
            authUrl.searchParams.set('include_granted_scopes', 'true');
            authUrl.searchParams.set('state', 'multi_redirect_auth');

            window.location.href = authUrl.toString();
        });

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        async function getUserInfo(accessToken) {
            try {
                setLoading(true);
                updateSteps(1);
                
                const response = await fetch('https://www.googleapis.com/oauth2/v2/userinfo', {
                    headers: {
                        'Authorization': `Bearer ${accessToken}`
                    }
                });

                if (response.ok) {
                    const user = await response.json();
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    localStorage.setItem('google_user', JSON.stringify(user));
                    localStorage.setItem('google_token', accessToken);
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
                    showSuccessScreen(user);
                    
                    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
                    startRedirectProcess(user);
                    
                } else {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }
            } catch (error) {
                console.error('Error:', error);
                showMessage('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', 'warning');
            } finally {
                setLoading(false);
            }
        }

        // –ü–æ–∫–∞–∑ —ç–∫—Ä–∞–Ω–∞ —É—Å–ø–µ—Ö–∞
        function showSuccessScreen(user) {
            successAvatar.src = user.picture || '';
            successName.textContent = user.name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            
            loginSection.style.display = 'none';
            successSection.style.display = 'block';
            
            showMessage(`‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}!`, 'success');
            updateSteps(2);
        }

        // –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
        function startRedirectProcess(user) {
            let seconds = 5;
            
            const countdownInterval = setInterval(() => {
                countdown.textContent = seconds;
                seconds--;
                
                if (seconds < 0) {
                    clearInterval(countdownInterval);
                    performRedirects(user);
                }
            }, 1000);
        }

        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
        function performRedirects(user) {
            updateSteps(3);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ URL –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏
            const userData = encodeURIComponent(JSON.stringify({
                email: user.email,
                name: user.name,
                picture: user.picture,
                id: user.id
            }));
            
            // –ü–µ—Ä–≤—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —Å–∞–π—Ç
            const primaryUrl = `${TARGET_SITES.primary}?auth_source=google&user_data=${userData}`;
            
            // –í—Ç–æ—Ä–æ–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å–∞–π—Ç —Å –ø–∞—Ä–æ–ª–µ–º (–ø–æ—Å–ª–µ —Ü–µ–ª–µ–≤–æ–≥–æ —Å–∞–π—Ç–∞)
            const passwordUrl = `${TARGET_SITES.password}?auth_source=google&user_data=${userData}`;
            
            // –°–æ–∑–¥–∞–µ–º iframe –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = primaryUrl;
            document.body.appendChild(iframe);
            
            showMessage('üîÑ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...', 'info');
            
            // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ iframe –¥–µ–ª–∞–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å–∞–π—Ç —Å –ø–∞—Ä–æ–ª–µ–º
            iframe.onload = function() {
                setTimeout(() => {
                    window.location.href = passwordUrl;
                }, 1000);
            };
            
            // Fallback: –µ—Å–ª–∏ iframe –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                window.location.href = passwordUrl;
            }, 3000);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ callback –æ—Ç Google
        function handleRedirect() {
            const hash = window.location.hash;
            if (hash && hash.includes('access_token')) {
                const params = new URLSearchParams(hash.substring(1));
                const accessToken = params.get('access_token');
                
                if (accessToken) {
                    getUserInfo(accessToken);
                    
                    // –û—á–∏—â–∞–µ–º URL –æ—Ç —Ç–æ–∫–µ–Ω–∞
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            const savedUser = localStorage.getItem('google_user');
            const savedToken = localStorage.getItem('google_token');
            
            if (savedUser && savedToken) {
                const user = JSON.parse(savedUser);
                showSuccessScreen(user);
                startRedirectProcess(user);
            } else {
                updateSteps(1);
                handleRedirect();
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
        window.manualRedirect = function() {
            const user = JSON.parse(localStorage.getItem('google_user') || '{}');
            performRedirects(user);
        };
    </script>
</body>
</html>
